(()=>{"use strict";var e={56:(e,t,r)=>{e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var a={},o=[],s=0;s<e.length;s++){var l=e[s],c=n.base?l[0]+n.base:l[0],h=a[c]||0,d="".concat(c," ").concat(h);a[c]=h+1;var p=r(d),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(u);else{var g=i(u,n);n.byIndex=s,t.splice(s,0,{identifier:d,updater:g,references:1})}o.push(d)}return o}function i(e,t){var r=t.domAPI(t);r.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,i){var a=n(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var s=r(a[o]);t[s].references--}for(var l=n(e,i),c=0;c<a.length;c++){var h=r(a[c]);0===t[h].references&&(t[h].updater(),t.splice(h,1))}a=l}}},104:(e,t,r)=>{e.exports=r.p+"0fd06f56bcfcbca81444.webp"},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},159:(e,t,r)=>{r.d(t,{A:()=>k});var n=r(601),i=r.n(n),a=r(314),o=r.n(a),s=r(417),l=r.n(s),c=new URL(r(993),r.b),h=new URL(r(332),r.b),d=new URL(r(971),r.b),p=new URL(r(793),r.b),u=new URL(r(754),r.b),g=new URL(r(104),r.b),m=new URL(r(493),r.b),y=o()(i()),f=l()(c),b=l()(h),w=l()(d),v=l()(p),x=l()(u),S=l()(g),B=l()(m);y.push([e.id,`* {\n  padding: 0;\n  margin: 0;\n  box-sizing: border-box;\n}\n\n.main {\n  background-image: url(${f});\n  background-size: cover;\n  display: grid;\n  grid-template-columns: 1fr 2fr 1fr;\n  grid-template-rows: 1fr;\n  width: 100vw;\n  height: 100vh;\n  align-items: center;\n  justify-items: center;\n  font-family: "Orbitron", sans-serif;\n  font-size: 1.5rem;\n}\n\n.menu {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: 1fr 1fr;\n  place-items: center;\n  position: absolute;\n  z-index: 2;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.764);\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 0.5s ease, visibility 0.5s ease;\n}\n\n.bot,\n.player {\n  font-size: 1.5rem;\n  width: 150px;\n  height: 80px;\n  border-radius: 24px;\n  border: none;\n  cursor: pointer;\n}\n\n.bot {\n  margin-left: 50%;\n  grid-column: 1 / 2;\n  grid-row: 1 / 2;\n  background-color: rgba(255, 81, 0);\n  box-shadow: 0 0 20px rgba(255, 81, 0, 0.8);\n}\n\n.player {\n  margin-right: 50%;\n  grid-template-columns: 2 / 3;\n  grid-row: 1 / 2;\n  background-color: rgb(0, 183, 255);\n  box-shadow: 0 0 20px rgba(0, 183, 255, 0.8);\n}\n\n.player-form {\n  display: flex;\n  visibility: hidden;\n  opacity: 0;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  z-index: 1;\n  height: 60vh;\n  width: 60vw;\n  background-color: rgb(0, 0, 0);\n  border-radius: 10px;\n  box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);\n  font-size: 2rem;\n  color: rgb(255, 255, 255);\n}\n\n.player-form h3 {\n  position: relative;\n  bottom: 20%;\n}\n\n.player-form button {\n  transform: translateY(40px);\n  cursor: pointer;\n  background-color: rgb(255, 255, 255);\n  border: none;\n  border-radius: 10px;\n  height: 50px;\n  width: 100px;\n  position: relative;\n  top: 30px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: rgb(90, 90, 90);\n  font-family: "Orbitron", sans-serif;\n}\n\ninput {\n  border: none;\n  border-radius: 8px;\n  width: 90%;\n  height: 50px;\n  font-size: 1.7rem;\n  padding-left: 1%;\n}\n\nfieldset {\n  display: flex;\n  gap: 20px;\n  border: none;\n}\n\nlegend {\n  position: relative;\n  bottom: 20px;\n  text-align: center;\n}\n\n.sidebar {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  padding-top: 10%;\n  padding-left: 20%;\n  gap: 20px;\n  grid-column: 1 / 2;\n  height: 100%;\n}\n\n.sidebar h1 {\n  font-size: 3rem;\n  color: rgb(255, 255, 255);\n}\n\n.start,\n.restart,\n.orientation {\n  width: 100px;\n  height: 40px;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-family: "Orbitron", sans-serif;\n  font-size: 16px;\n  background-color: rgb(255, 255, 255);\n  transition: all 0.2s ease-out;\n}\n\n.restart {\n  visibility: hidden;\n}\n\n.start:hover,\n.restart:hover,\n.orientation:hover {\n  background-color: rgb(0, 204, 255);\n  transform: scale(1.1);\n}\n\n.dashboard {\n  transform: translateY(500%);\n  grid-row: 1 / 2;\n  grid-column: 1 / 4;\n  color: rgb(255, 255, 255);\n  text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);\n}\n\n.game-board {\n  display: grid;\n  grid-template-columns: 2fr 2fr;\n  grid-template-rows: 1fr 10fr;\n  grid-column: 2 / 3;\n  grid-row: 1 / 2;\n  align-items: center;\n  justify-items: center;\n  width: 100%;\n  height: 100%;\n}\n\n.grid-one {\n  grid-column: 1 / 2;\n  grid-row: 2 / 3;\n  z-index: 1;\n}\n\n.grid-two {\n  grid-column: 2 / 3;\n  grid-row: 2 / 3;\n  z-index: 0;\n}\n\n.grid-one,\n.grid-two {\n  display: grid;\n  grid-template-columns: repeat(10, 1fr);\n  height: 300px;\n  width: 300px;\n  box-shadow: 0 0 15px rgba(0, 0, 0, 1);\n  background: rgba(0, 0, 0, 0.344);\n  backdrop-filter: blur(10px);\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 0.5s ease-out, visibility 0.5s ease-out;\n}\n\n.showing {\n  opacity: 1;\n  visibility: visible;\n}\n\n.cell {\n  cursor: pointer;\n  border: 1px solid rgb(0, 0, 0);\n  transition: all 0.3s ease-out;\n}\n\n.cell:hover,\n.opponent-cell:hover {\n  transform: scale(103%);\n  background-color: rgba(255, 255, 255, 0.66);\n  box-shadow: 0 0 20px rgba(255, 255, 255, 0.8);\n}\n\n.my-ships {\n  grid-column: 3 / 4;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  align-items: center;\n  height: 50%;\n  width: 200px;\n  background: rgba(0, 0, 0, 0.344);\n  backdrop-filter: blur(10px);\n  box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);\n}\n\n.ship {\n  transition: transform 0.2s ease;\n  cursor: pointer;\n}\n\n.ship:hover {\n  transform: scale(110%);\n}\n\n.ship:focus {\n  transform: scale(110%);\n}\n\n#battleship {\n  background-image: url(${b});\n  background-position: center;\n  background-size: cover;\n  height: 50px;\n  width: 180px;\n}\n\n#cruiser-one {\n  background-image: url(${w});\n  background-position: center;\n  background-size: cover;\n  height: 50px;\n  width: 140px;\n}\n\n#cruiser-two {\n  background-image: url(${w});\n  background-position: center;\n  background-size: cover;\n  height: 50px;\n  width: 140px;\n}\n\n#destroyer {\n  background-image: url(${v});\n  background-position: center;\n  background-size: cover;\n  height: 50px;\n  width: 110px;\n}\n\n#boat {\n  background-image: url(${x});\n  background-position: center;\n  background-size: cover;\n  height: 50px;\n  width: 80px;\n}\n\n.miss {\n  background-image: url(${S});\n  background-size: cover;\n}\n\n.hit {\n  background-image: url(${B});\n  background-size: contain;\n}\n\n.ship-cell {\n  background-color: rgb(0, 0, 0);\n}\n\n.error {\n  transform: translateX(2%) translateY(2%);\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 35%;\n  padding: 0;\n  font-size: 1rem;\n  color: white;\n  background-color: #900;\n  border-radius: 5px;\n  box-sizing: border-box;\n  margin-top: 1px;\n}\n`,""]);const k=y},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r}).join("")},t.i=function(e,r,n,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(n)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var h=[].concat(e[c]);n&&o[h[0]]||(void 0!==a&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=a),r&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=r):h[2]=r),i&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=i):h[4]="".concat(i)),t.push(h))}},t}},332:(e,t,r)=>{e.exports=r.p+"5982aab022a0eb891fbf.png"},417:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},493:(e,t,r)=>{e.exports=r.p+"20a0c01a366419cd6bc5.webp"},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},754:(e,t,r)=>{e.exports=r.p+"82f4ea4fdd4f96990c2d.png"},793:(e,t,r)=>{e.exports=r.p+"bae44cacb2f3101e52e4.png"},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var i=void 0!==r.layer;i&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,i&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var a=r.sourceMap;a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},971:(e,t,r)=>{e.exports=r.p+"9bf7480d55844353b080.png"},993:(e,t,r)=>{e.exports=r.p+"f6a471d927f498dfb491.webp"}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={id:n,exports:{}};return e[n](a,a.exports,r),a.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var i=n.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=n[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),r.b=document.baseURI||self.location.href,r.nc=void 0;var n=r(72),i=r.n(n),a=r(825),o=r.n(a),s=r(659),l=r.n(s),c=r(56),h=r.n(c),d=r(540),p=r.n(d),u=r(113),g=r.n(u),m=r(159),y={};y.styleTagTransform=g(),y.setAttributes=h(),y.insert=l().bind(null,"head"),y.domAPI=o(),y.insertStyleElement=p();i()(m.A,y);m.A&&m.A.locals&&m.A.locals;class f{constructor(){this.dashboard=document.querySelector(".dashboard"),this.orientationButton=document.querySelector(".orientation"),this.playerOneGrid=document.querySelector(".grid-one"),this.playerTwoGrid=document.querySelector(".grid-two")}renderGrid(){this.playerOneGrid.innerHTML="";for(let e=0;e<10;e++)for(let t=0;t<10;t++){const r=document.createElement("div");r.dataset.coordinate=`${e},${t}`,r.id=`p1-${e},${t}`,r.dataset.owner="p1",r.classList.add("cell"),this.playerOneGrid.appendChild(r)}}renderOponentGrid(){this.playerTwoGrid.innerHTML="";for(let e=0;e<10;e++)for(let t=0;t<10;t++){const r=document.createElement("div");r.dataset.coordinate=`${e},${t}`,r.id=`p2-${e},${t}`,r.dataset.owner="p2",r.classList.add("cell"),this.playerTwoGrid.appendChild(r)}}updatePlacementInfo(e,t){this.dashboard.textContent="attack"===t?`Player ${e} attack!`:`Player ${e} Put Your Ships!`}updateBattleInfo(e,t,r,n){if(n){this.dashboard.textContent=`Player ${t} Win!`,document.getElementById(r).classList.add("hit")}else if(e){document.getElementById(r).classList.add("hit"),this.dashboard.textContent=`Hit! Player ${t} attack again!`}else{document.getElementById(r).classList.add("miss"),this.dashboard.textContent=`Miss! Player ${t} attack!`}}showAllBoards(){this.playerOneGrid.classList.add("showing"),this.playerTwoGrid.classList.add("showing")}togglePlayerOneBoard(){this.playerOneGrid.classList.toggle("showing")}togglePlayerTwoBoard(){this.playerTwoGrid.classList.toggle("showing")}updateOrientationButton(e){this.orientationButton.textContent=e?"Horizontal":"Vertical"}markShipCells(e,t,r,n){const[i,a]=e.split(",").map(Number);for(let e=0;e<t;e++)if("p1"===n)if(r){document.getElementById(`p1-${i},${a+e}`).classList.add("ship-cell")}else{document.getElementById(`p1-${i+e},${a}`).classList.add("ship-cell")}else if(r){document.getElementById(`p2-${i},${a+e}`).classList.add("ship-cell")}else{document.getElementById(`p2-${i+e},${a}`).classList.add("ship-cell")}}clearCells(){document.querySelectorAll(".cell").forEach(e=>{e.classList.remove("ship-cell"),e.classList.remove("hit"),e.classList.remove("miss")})}}class b{constructor(e,t){this.id=e,this.shipLength=t,this.hits=0,this.destroyed=!1,this.position=new Set}hit(){this.hits<this.shipLength&&(this.hits+=1,this.isSunk())}isSunk(){this.hits===this.shipLength&&(this.destroyed=!0)}}class w{#e=Array.from({length:10},()=>Array(10).fill(0));#t=[];constructor(){this.shots=[],this.placedShips=new Set,this.allShipsPlaced=!1}getValidPlace(e,t,r,n){if(e){if(n+t>10)return!1;for(let e=0;e<t;e++)if(0!==this.#e[r][n+e])return!1;return!0}if(r+t>10)return!1;for(let e=0;e<t;e++)if(0!==this.#e[r+e][n])return!1;return!0}placeShip(e,t,r,n){const[i,a]=n.split(",").map(Number);if(this.getValidPlace(e,t,i,a)){if(e){const e=new b(r,t);for(let r=0;r<t;r++)this.#e[i][a+r]=1,e.position.add(`${i},${a+r}`);this.#t.push(e),this.placedShips.add(e.id),console.log(this.#t)}else{const e=new b(r,t);for(let r=0;r<t;r++)this.#e[i+r][a]=1,e.position.add(`${i+r},${a}`);this.#t.push(e),this.placedShips.add(e.id),console.log(this.#t)}5===this.#t.length&&(this.allShipsPlaced=!0)}}receiveAttack(e){const[t,r]=e.split(",").map(Number);let n=!1;for(let i=0;i<this.#t.length;i++)if(this.#t[i].position.has(e))return this.#t[i].hit(),this.#e[t][r]=2,n=!0,n;if(!n)return this.#e[t][r]=3,n}areAllShipsSunk(){for(let e=0;e<this.#t.length;e++)if(!this.#t[e].destroyed)return!1;return!0}}class v{constructor(e,t){this.name=e,this.gameBoard=t}}class x{constructor(e,t){this.botController=e,this.gameUiRenderer=t,this.playerOneBoard=new w,this.playerTwoBoard=new w,this.playerOne=new v(null,this.playerOneBoard),this.playerTwo=new v(null,this.playerTwoBoard),this.currentPlayer=this.playerOne,this.isBotMode=!1}checkWinner(){return!!this.playerOne.gameBoard.areAllShipsSunk()||(!!this.playerTwo.gameBoard.areAllShipsSunk()||void 0)}attack(e,t){if(this.currentPlayer===this.playerTwo&&"p1"===t&&!this.checkWinner()){if(this.playerOne.gameBoard.shots.includes(e))return;let t=this.playerOne.gameBoard.receiveAttack(e);this.playerOne.gameBoard.shots.push(e),this.isBotMode?this.botMoveSelector(t):this.selectPlayer(t),this.gameUiRenderer.updateBattleInfo(t,this.currentPlayer.name,`p1-${e}`,this.checkWinner())}if(this.currentPlayer===this.playerOne&&"p2"===t&&!this.checkWinner()){if(this.playerTwo.gameBoard.shots.includes(e))return;let t=this.playerTwo.gameBoard.receiveAttack(e);this.playerTwo.gameBoard.shots.push(e),this.isBotMode?this.botMoveSelector(t):this.selectPlayer(t),this.gameUiRenderer.updateBattleInfo(t,this.currentPlayer.name,`p2-${e}`,this.checkWinner())}}botMoveSelector(e){if(this.currentPlayer===this.playerOne&&!e){this.currentPlayer=this.playerTwo;let e=this.botController.getBotAttackCell(),t=this.playerOne.gameBoard.receiveAttack(e);if(this.gameUiRenderer.updateBattleInfo(t,this.currentPlayer.name,`p1-${e}`),t)for(;!0===t;){let e=this.botController.getBotAttackCell();t=this.playerOne.gameBoard.receiveAttack(e),this.gameUiRenderer.updateBattleInfo(t,this.currentPlayer.name,`p1-${e}`),this.currentPlayer=this.playerOne}else this.currentPlayer===this.playerTwo&&(this.currentPlayer=this.playerOne)}}selectPlayer(e){this.currentPlayer===this.playerOne?e||(this.currentPlayer=this.playerTwo,this.gameUiRenderer.togglePlayerTwoBoard(),this.gameUiRenderer.togglePlayerOneBoard()):this.currentPlayer===this.playerTwo&&(e||(this.currentPlayer=this.playerOne,this.gameUiRenderer.togglePlayerOneBoard(),this.gameUiRenderer.togglePlayerTwoBoard()))}}class S{constructor(e,t,r){this.placementController=t,this.gameController=e,this.gameBoardContainer=document.querySelector(".game-board"),this.shipBase=document.querySelector(".my-ships"),this.orientationButton=document.querySelector(".orientation"),this.gameUiRenderer=r,this.initOrientationButton()}initOrientationButton(){this.orientationButton.addEventListener("click",()=>{this.placementController.isHorizontal=!this.placementController.isHorizontal,this.gameUiRenderer.updateOrientationButton(this.placementController.isHorizontal)})}handleShipClick(){this.gameUiRenderer.togglePlayerTwoBoard(),this.gameUiRenderer.updatePlacementInfo(this.placementController.playerOneName,"placement"),this.shipBase.addEventListener("click",e=>{if("placement"!==this.gameController.mode)return;let t=e.target.dataset.length,r=e.target.dataset.id;t&&this.placementController.shipSelector({length:t,id:r})})}handleCellClick(){this.gameBoardContainer.addEventListener("click",e=>{let t=e.target.dataset.coordinate;if(!t)return;let r=e.target.dataset.owner;"attack"===this.gameController.mode?this.gameController.handleAttack(t,r):this.gameController.handlePlacement(t,r)})}}class B{constructor(e){this.playerManager=e,this.menuContainer=document.querySelector(".menu"),this.playerForm=document.querySelector(".player-form"),this.playerOneInput=document.querySelector("#player-one"),this.playerTwoInput=document.querySelector("#player-two"),this.playerOneError=document.getElementById("player-one-error"),this.playerTwoError=document.getElementById("player-two-error")}playerFormInit(){this.playerForm.addEventListener("input",()=>{this.playerOneInput.validity.tooShort?this.playerOneError.textContent="Player name must contain 2 or more characters":this.playerOneError.textContent="",this.playerTwoInput.validity.tooShort?this.playerTwoError.textContent="Player name must contain 2 or more characters":this.playerTwoError.textContent=""}),this.playerForm.addEventListener("submit",e=>{e.preventDefault(),this.playerOneInput.validity.valueMissing||this.playerOneInput.validity.tooShort||this.playerTwoInput.validity.valueMissing||this.playerTwoInput.validity.tooShort||(this.playerManager.playerOne.name=this.playerOneInput.value,this.playerManager.playerTwo.name=this.playerTwoInput.value,this.menuContainer.classList.toggle("showing"),this.playerForm.classList.toggle("showing"),this.playerForm.reset())})}}class k{constructor(e,t,r,n){this.mode="placement",this.placementController=e,this.playerManager=t,this.gameUiRenderer=r,this.formHandler=n}startPlayersGame(){this.formHandler.playerFormInit(),this.gameUiRenderer.showAllBoards(),this.restartGame()}startBotGame(){this.playerManager.playerOne.name="",this.playerManager.playerTwo.name="AI",this.playerManager.isBotMode=!0,this.restartGame()}restartGame(){this.mode="placement",this.playerManager.playerOneBoard=new w,this.playerManager.playerTwoBoard=new w,this.gameUiRenderer.showAllBoards(),this.playerManager.playerOne.gameBoard=this.playerManager.playerOneBoard,this.playerManager.playerTwo.gameBoard=this.playerManager.playerTwoBoard,this.playerManager.currentPlayer=this.playerManager.playerOne,this.gameUiRenderer.clearCells()}handlePlacement(e,t){const r=this.placementController.placePlayerShips(e,t);setTimeout(()=>{r&&(this.mode="attack")},100)}handleAttack(e,t){this.playerManager.attack(e,t)}}class C{constructor(){this.attackCells=this.getCellsArray(),this.placementCells=this.getCellsArray(),this.botShips=[4,3,3,2,1]}getCellsArray(){const e=[];for(let t=0;t<10;t++)for(let r=0;r<10;r++)e.push(`${t},${r}`);return e}getBotPlacementCell(){const e=this.placementCells,t=Math.floor(Math.random()*e.length);return e.splice(t,1)[0]}getBotAttackCell(){const e=this.attackCells,t=Math.floor(Math.random()*e.length);return e.splice(t,1)[0]}}class P{constructor(e,t,r){this.botController=t,this.playerManager=e,this.gameUiRenderer=r,this.selectedShip=null,this.isHorizontal=!0}get playerOneName(){return this.playerManager.playerOne.name}get playerTwoName(){return this.playerManager.playerTwo.name}get currentPlayerName(){return this.playerManager.currentPlayer.name}get playerOneBoard(){return this.playerManager.playerOne.gameBoard}get playerTwoBoard(){return this.playerManager.playerTwo.gameBoard}shipSelector(e){this.selectedShip=e}placeBotShips(){for(;!this.playerTwoBoard.allShipsPlaced;){let e=this.botController.botShips.shift(),t=this.botController.getBotPlacementCell(),r=this.playerTwoBoard.placeShip(this.isHorizontal,e,"battleship",t);if(!r)for(;r;){let t=this.botController.getBotPlacementCell();r=this.playerTwoBoard.placeShip(this.isHorizontal,e,"battleship",t)}this.playerTwoBoard.allShipsPlaced,this.botController.botShips.push(e)}}placePlayerShips(e,t){if(!this.playerOneBoard.allShipsPlaced){if(!this.selectedShip)return;if(this.playerOneBoard.placedShips.has(this.selectedShip.id))return;if("p1"!==t)return;this.playerOneBoard.placeShip(this.isHorizontal,Number(this.selectedShip.length),this.selectedShip.id,e),this.gameUiRenderer.markShipCells(e,Number(this.selectedShip.length),this.isHorizontal,"p1"),this.playerOneBoard.allShipsPlaced&&(this.gameUiRenderer.updatePlacementInfo(this.playerTwoName,this.mode),this.playerManager.isBotMode?this.gameUiRenderer.showAllBoards():(this.gameUiRenderer.togglePlayerOneBoard(),this.gameUiRenderer.togglePlayerTwoBoard())),this.selectedShip&&(this.selectedShip=null)}if(this.playerOneBoard.allShipsPlaced)if(this.playerManager.isBotMode){if(this.placeBotShips(),this.gameUiRenderer.updatePlacementInfo(this.currentPlayerName,"attack"),console.log(this.playerTwoBoard.placedShips),this.playerTwoBoard.allShipsPlaced)return this.gameUiRenderer.clearCells(),!0}else{if(!this.selectedShip)return;if(this.playerTwoBoard.placedShips.has(this.selectedShip.id))return;if("p2"!==t)return;if(console.log(this.selectedShip),this.playerTwoBoard.placeShip(this.isHorizontal,Number(this.selectedShip.length),this.selectedShip.id,e),this.gameUiRenderer.markShipCells(e,Number(this.selectedShip.length),this.isHorizontal,"p2"),this.selectedShip&&(this.selectedShip=null),this.playerTwoBoard.allShipsPlaced)return this.gameUiRenderer.clearCells(),this.gameUiRenderer.updatePlacementInfo(this.currentPlayerName,"attack"),!0}}}const T=document.querySelector(".start"),O=document.querySelector(".menu"),M=document.querySelector(".player-form"),L=document.querySelector(".bot"),$=document.querySelector(".player"),I=document.querySelector(".restart");document.addEventListener("DOMContentLoaded",()=>{const e=new f,t=new C,r=new x(t,e),n=new B(r),i=new P(r,t,e),a=new k(i,r,e,n),o=new S(a,i,e);e.renderGrid(),e.renderOponentGrid(),e.togglePlayerOneBoard(),e.togglePlayerTwoBoard(),T.addEventListener("click",()=>{O.classList.toggle("showing"),I.classList.add("showing")}),$.addEventListener("click",()=>{M.classList.toggle("showing"),a.startPlayersGame(),o.handleShipClick(),o.handleCellClick()}),L.addEventListener("click",()=>{O.classList.toggle("showing"),a.startBotGame(),o.handleShipClick(),o.handleCellClick()}),I.addEventListener("click",()=>{a.restartGame(),o.handleShipClick(),o.handleCellClick()})})})();